{"remainingRequest":"/Users/mac/Desktop/bilibili/html/vue的副本/vue_serve/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/bilibili/html/vue的副本/vue_serve/src/views/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/bilibili/html/vue的副本/vue_serve/src/views/edit.vue","mtime":1612802670456},{"path":"/Users/mac/Desktop/bilibili/html/vue的副本/vue_serve/node_modules/cache-loader/dist/cjs.js","mtime":1607515998020},{"path":"/Users/mac/Desktop/bilibili/html/vue的副本/vue_serve/node_modules/babel-loader/lib/index.js","mtime":1607515998082},{"path":"/Users/mac/Desktop/bilibili/html/vue的副本/vue_serve/node_modules/cache-loader/dist/cjs.js","mtime":1607515998020},{"path":"/Users/mac/Desktop/bilibili/html/vue的副本/vue_serve/node_modules/vue-loader/lib/index.js","mtime":1610033579139}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZiYXIgZnJvbSAiLi4vY29tcG9uZW50cy9jb21tb24vTmF2YmFyLnZ1ZSI7CmltcG9ydCBlZGl0QmFubmVyIGZyb20gIi4uL2NvbXBvbmVudHMvY29tbW9uL2VkaXRCYW5uZXIiOwppbXBvcnQgeyBEaWFsb2cgfSBmcm9tICJ2YW50IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbDoge30sCiAgICAgIHNob3c6IGZhbHNlLAogICAgICB0ZXh0U2hvdzogZmFsc2UsCiAgICAgIHRleHQ6ICIiLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE5hdmJhciwKICAgIGVkaXRCYW5uZXIsCiAgICBbRGlhbG9nLkNvbXBvbmVudC5uYW1lXTogRGlhbG9nLkNvbXBvbmVudCwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNlbGVjdFVzZXIoKSB7CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCIvdXNlci8iICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImlkIikpOwogICAgICB0aGlzLm1vZGVsID0gcmVzLmRhdGFbMF07CiAgICB9LAogICAgYXN5bmMgYWZ0ZXJSZWFkKGZpbGUpIHsKICAgICAgY29uc3QgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgZm9ybWRhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZS5maWxlKTsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCIvdXBsb2FkIiwgZm9ybWRhdGEpOwogICAgICB0aGlzLm1vZGVsLnVzZXJfaW1nID0gcmVzLmRhdGEudXJsOwogICAgICB0aGlzLlVzZXJVcERhdGEoKTsKICAgIH0sCiAgICBhc3luYyBVc2VyVXBEYXRhKCkgewogICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoCiAgICAgICAgIi91cGRhdGUvIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpZCIpLAogICAgICAgIHRoaXMubW9kZWwKICAgICAgKTsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgIH0sCiAgICBCYW5uZXJDbGljayhlKXsKICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuaW5uZXJIVE1MKTsKICAgICAgdGhpcy50ZXh0ID0gdGhpcy5tb2RlbC5uYW1lCiAgICAgIHRoaXMuc2hvdyA9IHRydWUKICAgIH0sCiAgICBQZXJzb25DbGljayhlKXsKICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuaW5uZXJIVE1MKTsKICAgICAgdGhpcy50ZXh0ID0gdGhpcy5tb2RlbC51c2VyX2Rlc2MKICAgICAgdGhpcy50ZXh0U2hvdyA9IHRydWUKICAgIH0sCiAgICBjb25maXJtQ2xpY2soKSB7CiAgICAgIHRoaXMubW9kZWwubmFtZSA9IHRoaXMudGV4dDsKICAgICAgdGhpcy5Vc2VyVXBEYXRhKCk7CiAgICAgIHRoaXMudGV4dCA9ICIiOwogICAgfSwKICAgIGRlc2NDbGljaygpIHsKICAgICAgdGhpcy5tb2RlbC51c2VyX2Rlc2MgPSB0aGlzLnRleHQ7CiAgICAgIHRoaXMuVXNlclVwRGF0YSgpOwogICAgICB0aGlzLnRleHQgPSAiIjsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNlbGVjdFVzZXIoKTsKICB9LAp9Owo="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div style=\"margin-bottom: 10px\"><navbar /></div>\n    <div class=\"UploaderFile\">\n      <van-uploader\n        preview-size=\"100vw\"\n        class=\"UploaderImg\"\n        :after-read=\"afterRead\"\n      />\n      <edit-banner left=\"头像\">\n        <img :src=\"model.user_img\" alt=\"\" slot=\"right\" v-if=\"model.user_img\" />\n        <img src=\"../assets/github.svg\" alt=\"\" slot=\"right\" v-else />\n      </edit-banner>\n    </div>\n    <edit-banner left=\"昵称\" >\n      <a href=\"javascript:;\" slot=\"right\" @click=\"BannerClick($event)\">{{ model.name }}</a>\n    </edit-banner>\n    <edit-banner left=\"UID\">\n      <a slot=\"right\">{{ model.username }}</a>\n    </edit-banner>\n    <edit-banner left=\"性别\">\n      <a href=\"javascript:;\" slot=\"right\">{{ model.gender }}</a>\n    </edit-banner>\n    <edit-banner left=\"出生日期\">\n      <a href=\"javascript:;\" slot=\"right\">{{ model.name }}</a>\n    </edit-banner>\n    <edit-banner left=\"个性签名\" >\n      <a href=\"javascript:;\" slot=\"right\" @click=\"PersonClick($event)\">{{ model.user_desc }}</a>\n    </edit-banner>\n\n    <van-dialog\n      v-model=\"show\"\n      title=\"昵称\"\n      show-cancel-button\n      @confirm=\"confirmClick\"\n    >\n      <van-field v-model=\"text\" autofocus />\n    </van-dialog>\n\n    <van-dialog\n      v-model=\"textShow\"\n      title=\"个性签名\"\n      show-cancel-button\n      @confirm=\"descClick\"\n    >\n      <van-field v-model=\"text\" autofocus />\n    </van-dialog>\n  </div>\n</template>\n<script>\nimport Navbar from \"../components/common/Navbar.vue\";\nimport editBanner from \"../components/common/editBanner\";\nimport { Dialog } from \"vant\";\nexport default {\n  data() {\n    return {\n      model: {},\n      show: false,\n      textShow: false,\n      text: \"\",\n    };\n  },\n  components: {\n    Navbar,\n    editBanner,\n    [Dialog.Component.name]: Dialog.Component,\n  },\n  methods: {\n    async selectUser() {\n      const res = await this.$http.get(\"/user/\" + localStorage.getItem(\"id\"));\n      this.model = res.data[0];\n    },\n    async afterRead(file) {\n      const formdata = new FormData();\n      formdata.append(\"file\", file.file);\n      const res = await this.$http.post(\"/upload\", formdata);\n      this.model.user_img = res.data.url;\n      this.UserUpData();\n    },\n    async UserUpData() {\n      const res = await this.$http.post(\n        \"/update/\" + localStorage.getItem(\"id\"),\n        this.model\n      );\n      console.log(res);\n    },\n    BannerClick(e){\n      console.log(e.target.innerHTML);\n      this.text = this.model.name\n      this.show = true\n    },\n    PersonClick(e){\n      console.log(e.target.innerHTML);\n      this.text = this.model.user_desc\n      this.textShow = true\n    },\n    confirmClick() {\n      this.model.name = this.text;\n      this.UserUpData();\n      this.text = \"\";\n    },\n    descClick() {\n      this.model.user_desc = this.text;\n      this.UserUpData();\n      this.text = \"\";\n    }\n  },\n  created() {\n    this.selectUser();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.UploaderFile {\n  position: relative;\n  overflow: hidden;\n  img {\n    width: 12.778vw;\n    height: 12.778vw;\n    border-radius: 50%;\n  }\n  .UploaderImg {\n    position: absolute;\n    opacity: 0;\n  }\n}\n</style>"]}]}